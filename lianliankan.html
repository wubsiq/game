<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è¿è¿çœ‹æ¸¸æˆ</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            background-color: #f0f0f0;
        }
        h1 {
            color: #333;
        }
        .game-info {
            display: flex;
            justify-content: space-between;
            width: 400px;
            margin: 10px 0;
            font-weight: bold;
        }
        .game-board {
            display: grid;
            grid-template-columns: repeat(8, 50px);
            grid-gap: 2px;
            margin: 20px 0;
            background-color: #333;
            padding: 5px;
            border-radius: 5px;
        }
        .tile {
            width: 50px;
            height: 50px;
            background-color: #4CAF50;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 24px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        .tile:hover {
            background-color: #45a049;
        }
        .tile.selected {
            background-color: #2196F3;
        }
        .tile.matched {
            background-color: #FF9800;
            opacity: 0.5;
        }
        .controls {
            margin: 20px 0;
        }
        .btn {
            background-color: #4CAF50;
            color: white;
            border: none;
            padding: 12px 24px;
            font-size: 16px;
            border-radius: 5px;
            cursor: pointer;
            margin: 0 10px;
            transition: background-color 0.3s;
        }
        .btn:hover {
            background-color: #45a049;
        }
        .exit-btn {
            background-color: #f44336;
        }
        .exit-btn:hover {
            background-color: #d32f2f;
        }
        .instructions {
            max-width: 500px;
            text-align: center;
            margin: 20px 0;
            color: #666;
        }
    </style>
</head>
<body>
    <h1>è¿è¿çœ‹æ¸¸æˆ</h1>
    
    <div class="game-info">
        <div>åˆ†æ•°: <span id="score">0</span></div>
        <div>å‰©ä½™: <span id="remaining">0</span></div>
    </div>
    
    <div class="game-board" id="board"></div>
    
    <div class="instructions">
        <p>ç‚¹å‡»ä¸¤ä¸ªç›¸åŒçš„å›¾æ¡ˆï¼Œå¦‚æœå®ƒä»¬å¯ä»¥é€šè¿‡ä¸è¶…è¿‡ä¸¤ä¸ªè½¬å¼¯çš„çº¿è¿æ¥ï¼Œåˆ™ä¼šæ¶ˆé™¤ã€‚</p>
    </div>
    
    <div class="controls">
        <button class="btn" onclick="newGame()">æ–°æ¸¸æˆ</button>
        <button class="btn exit-btn" onclick="exitToHome()">é€€å‡ºæ¸¸æˆ</button>
    </div>

    <script>
        // æ¸¸æˆå˜é‡
        let board = [];
        let symbols = [];
        let selectedTile = null;
        let score = 0;
        let totalPairs = 0;
        
        // å›¾æ¡ˆæ•°ç»„
        const iconSymbols = ['ğŸ', 'ğŸŒ', 'ğŸ‡', 'ğŸŠ', 'ğŸ“', 'ğŸ’', 'ğŸ‘', 'ğŸ', 'ğŸ¥', 'ğŸ‰'];
        
        // åˆå§‹åŒ–æ¸¸æˆ
        function initGame() {
            // é‡ç½®æ¸¸æˆçŠ¶æ€
            score = 0;
            document.getElementById('score').textContent = score;
            selectedTile = null;
            
            // åˆå§‹åŒ–æ¸¸æˆæ¿ (8x8)
            board = Array(8).fill().map(() => Array(8).fill(0));
            
            // åˆ›å»ºå›¾æ¡ˆå¯¹
            symbols = [];
            for (let i = 0; i < 10; i++) {
                symbols.push(iconSymbols[i]);
                symbols.push(iconSymbols[i]);
            }
            
            // æ‰“ä¹±å›¾æ¡ˆ
            shuffleArray(symbols);
            
            // å¡«å……æ¸¸æˆæ¿
            let index = 0;
            for (let i = 0; i < 8; i++) {
                for (let j = 0; j < 8; j++) {
                    board[i][j] = symbols[index++];
                }
            }
            
            // è®¡ç®—æ€»å¯¹æ•°
            totalPairs = symbols.length / 2;
            document.getElementById('remaining').textContent = totalPairs;
            
            // æ¸²æŸ“æ¸¸æˆæ¿
            render();
        }
        
        // æ‰“ä¹±æ•°ç»„
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }
        
        // æ¸²æŸ“æ¸¸æˆæ¿
        function render() {
            const boardElement = document.getElementById('board');
            boardElement.innerHTML = '';
            
            for (let i = 0; i < 8; i++) {
                for (let j = 0; j < 8; j++) {
                    const tile = document.createElement('div');
                    tile.className = 'tile';
                    tile.dataset.row = i;
                    tile.dataset.col = j;
                    tile.textContent = board[i][j];
                    
                    // æ·»åŠ ç‚¹å‡»äº‹ä»¶
                    tile.addEventListener('click', () => selectTile(i, j));
                    
                    boardElement.appendChild(tile);
                }
            }
        }
        
        // é€‰æ‹©ç“·ç –
        function selectTile(row, col) {
            // å¦‚æœç‚¹å‡»çš„æ˜¯ç©ºä½ç½®ï¼Œä¸å¤„ç†
            if (board[row][col] === 0) return;
            
            const tile = document.querySelector(`.tile[data-row="${row}"][data-col="${col}"]`);
            
            // å¦‚æœå·²ç»é€‰æ‹©äº†ä¸€ä¸ªç“·ç –
            if (selectedTile) {
                // å¦‚æœç‚¹å‡»çš„æ˜¯åŒä¸€ä¸ªç“·ç –ï¼Œå–æ¶ˆé€‰æ‹©
                if (selectedTile.row === row && selectedTile.col === col) {
                    tile.classList.remove('selected');
                    selectedTile = null;
                    return;
                }
                
                // å¦‚æœä¸¤ä¸ªç“·ç –å›¾æ¡ˆç›¸åŒï¼Œæ£€æŸ¥æ˜¯å¦å¯ä»¥è¿æ¥
                if (board[selectedTile.row][selectedTile.col] === board[row][col]) {
                    if (canConnect(selectedTile.row, selectedTile.col, row, col)) {
                        // æ¶ˆé™¤ä¸¤ä¸ªç“·ç –
                        eliminateTiles(selectedTile.row, selectedTile.col, row, col);
                        
                        // å¢åŠ åˆ†æ•°
                        score += 10;
                        document.getElementById('score').textContent = score;
                        
                        // å‡å°‘å‰©ä½™å¯¹æ•°
                        totalPairs--;
                        document.getElementById('remaining').textContent = totalPairs;
                        
                        // æ£€æŸ¥æ˜¯å¦å®Œæˆ
                        if (totalPairs === 0) {
                            setTimeout(() => {
                                alert(`æ­å–œä½ å®Œæˆè¿è¿çœ‹ï¼æœ€ç»ˆå¾—åˆ†: ${score}`);
                            }, 100);
                        }
                    }
                }
                
                // å–æ¶ˆä¹‹å‰çš„é€‰æ‹©
                document.querySelector(`.tile[data-row="${selectedTile.row}"][data-col="${selectedTile.col}"]`).classList.remove('selected');
                selectedTile = null;
            } else {
                // é€‰æ‹©æ–°ç“·ç –
                tile.classList.add('selected');
                selectedTile = {row, col};
            }
        }
        
        // æ£€æŸ¥ä¸¤ä¸ªç“·ç –æ˜¯å¦å¯ä»¥è¿æ¥ï¼ˆç®€åŒ–ç‰ˆï¼Œåªæ£€æŸ¥ç›´çº¿è¿æ¥ï¼‰
        function canConnect(row1, col1, row2, col2) {
            // æ£€æŸ¥æ˜¯å¦åœ¨åŒä¸€è¡Œ
            if (row1 === row2) {
                const minCol = Math.min(col1, col2);
                const maxCol = Math.max(col1, col2);
                
                // æ£€æŸ¥ä¸­é—´æ˜¯å¦æœ‰éšœç¢ç‰©
                for (let col = minCol + 1; col < maxCol; col++) {
                    if (board[row1][col] !== 0) {
                        return false;
                    }
                }
                return true;
            }
            
            // æ£€æŸ¥æ˜¯å¦åœ¨åŒä¸€åˆ—
            if (col1 === col2) {
                const minRow = Math.min(row1, row2);
                const maxRow = Math.max(row1, row2);
                
                // æ£€æŸ¥ä¸­é—´æ˜¯å¦æœ‰éšœç¢ç‰©
                for (let row = minRow + 1; row < maxRow; row++) {
                    if (board[row][col1] !== 0) {
                        return false;
                    }
                }
                return true;
            }
            
            return false;
        }
        
        // æ¶ˆé™¤ä¸¤ä¸ªç“·ç –
        function eliminateTiles(row1, col1, row2, col2) {
            // æ¸…é™¤ç“·ç –å†…å®¹
            board[row1][col1] = 0;
            board[row2][col2] = 0;
            
            // æ›´æ–°æ˜¾ç¤º
            document.querySelector(`.tile[data-row="${row1}"][data-col="${col1}"]`).textContent = '';
            document.querySelector(`.tile[data-row="${row2}"][data-col="${col2}"]`).textContent = '';
            
            // æ·»åŠ æ¶ˆé™¤æ ·å¼
            document.querySelector(`.tile[data-row="${row1}"][data-col="${col1}"]`).classList.add('matched');
            document.querySelector(`.tile[data-row="${row2}"][data-col="${col2}"]`).classList.add('matched');
        }
        
        // æ–°æ¸¸æˆ
        function newGame() {
            initGame();
        }
        
        // é€€å‡ºåˆ°ä¸»é¡µ
        function exitToHome() {
            window.location.href = 'index.html';
        }
        
        // åˆå§‹åŒ–æ¸¸æˆ
        initGame();
    </script>
</body>
</html>